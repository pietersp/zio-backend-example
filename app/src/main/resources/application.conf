# Database Configuration
db {
  url = "jdbc:postgresql://localhost:5432/zio_backend"
  user = "postgres"
  password = "postgres"

  # Connection pool settings
  connectionPool {
    size = 10
    connectionTimeout = "30 seconds"
    idleTimeout = "10 minutes"
    maxLifetime = "30 minutes"
  }
}

# Flyway Configuration
flyway {
  locations = ["classpath:db/migration"]
  baseline-on-migrate = true
  validate-on-migrate = true
  out-of-order = false
  clean-disabled = true
}

# Environment-specific configurations
environments {
  dev {
    db.url = "jdbc:postgresql://localhost:5432/zio_backend_dev"
    flyway.locations = ["classpath:db/migration", "classpath:db/dev"]
  }

  test {
    db.url = "jdbc:postgresql://localhost:5432/zio_backend_test"
    flyway.locations = ["classpath:db/migration"]
    flyway.clean-disabled = false
    flyway.validate-on-migrate = false
  }

  prod {
    db.url = ${?DATABASE_URL}
    db.user = ${?DATABASE_USER}
    db.password = ${?DATABASE_PASSWORD}
    flyway.locations = ["classpath:db/migration", "classpath:db/prod"]
    flyway.clean-disabled = true
    flyway.validate-on-migrate = true
  }
}

# Application Configuration
app {
  http {
    port = 8080
    host = "0.0.0.0"
  }

  logging {
    # Default log level (trace, debug, info, warn, error, fatal)
    level = "INFO"

    # Per-package log levels for fine-grained control
    levels {
      "com.augustnagro.magnum" = "DEBUG"
      "com.example" = "INFO"
      "flyway" = "INFO"
      "org.flywaydb" = "INFO"
      "com.zaxxer.hikari" = "INFO"
      "zio.http" = "INFO"
    }
  }
}